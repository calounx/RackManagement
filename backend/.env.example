# HomeRack API Environment Configuration
# Copy this file to .env and update with your values

# ============================================================================
# Application
# ============================================================================
APP_NAME="HomeRack API"
VERSION="1.0.1"
DEBUG=false
ENVIRONMENT=development  # development, staging, production

# ============================================================================
# Database Configuration
# ============================================================================
# Database type: sqlite or postgresql
DB_TYPE=sqlite

# SQLite (for development/testing)
DATABASE_URL=sqlite:///./homerack.db

# PostgreSQL (for production)
# DATABASE_URL=postgresql://homerack_user:your_secure_password_here@postgres:5432/homerack
# For local PostgreSQL: postgresql://homerack_user:your_secure_password_here@localhost:5432/homerack

# Connection Pool Settings (PostgreSQL only)
DB_POOL_SIZE=20
DB_MAX_OVERFLOW=10
DB_POOL_TIMEOUT=30
DB_POOL_RECYCLE=3600
DB_POOL_PRE_PING=true

# Database Connection Retry
DB_CONNECT_RETRY_MAX_ATTEMPTS=5
DB_CONNECT_RETRY_DELAY=2

# Debug
DB_ECHO=false

# ============================================================================
# Redis Configuration
# ============================================================================
REDIS_ENABLED=true
REDIS_URL=redis://redis:6379/0
REDIS_MAX_CONNECTIONS=50
REDIS_SOCKET_TIMEOUT=5
REDIS_SOCKET_CONNECT_TIMEOUT=5
REDIS_HEALTH_CHECK_INTERVAL=30

# ============================================================================
# Security & Authentication
# ============================================================================
SECRET_KEY=change-me-in-production-use-a-long-random-string
JWT_SECRET_KEY=your-jwt-secret-key-change-this-in-production-use-openssl-rand-hex-32
JWT_ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30
REFRESH_TOKEN_EXPIRE_DAYS=7
REQUIRE_AUTH=true  # Set to false for development/testing without auth

# ============================================================================
# CORS
# ============================================================================
CORS_ORIGINS=http://localhost:3000,http://localhost:8000

# ============================================================================
# Logging
# ============================================================================
LOG_LEVEL=INFO
LOG_FORMAT=json
LOG_REQUEST_BODY=false
LOG_RESPONSE_BODY=false
LOG_SLOW_QUERY_THRESHOLD=1.0

# ============================================================================
# NetBox DCIM Integration
# ============================================================================
# Enable NetBox integration for pulling device specifications and rack layouts
NETBOX_ENABLED=false
NETBOX_URL=https://netbox.example.com
NETBOX_TOKEN=nbt_your_token_here
NETBOX_TIMEOUT=30
NETBOX_VERIFY_SSL=true
NETBOX_CACHE_TTL=3600

# ============================================================================
# Rate Limiting
# ============================================================================
RATE_LIMIT_ENABLED=true
RATE_LIMIT_DEFAULT=300/hour
RATE_LIMIT_ANONYMOUS=100/hour
RATE_LIMIT_AUTH_ENDPOINTS=5/minute  # Login attempts
RATE_LIMIT_THERMAL_ANALYSIS=10/minute
RATE_LIMIT_BULK_OPERATIONS=5/minute

# ============================================================================
# Timeouts (in seconds)
# ============================================================================
REQUEST_TIMEOUT_DEFAULT=30
REQUEST_TIMEOUT_HEALTH=5
REQUEST_TIMEOUT_THERMAL=60
REQUEST_TIMEOUT_OPTIMIZATION=120
REQUEST_TIMEOUT_BULK=60

# ============================================================================
# Retry Configuration
# ============================================================================
RETRY_ENABLED=true
RETRY_MAX_ATTEMPTS=5
RETRY_MAX_DELAY=10
RETRY_EXPONENTIAL_BASE=2.0
RETRY_JITTER=true

# ============================================================================
# Circuit Breaker
# ============================================================================
CIRCUIT_BREAKER_ENABLED=true
CIRCUIT_BREAKER_FAILURE_THRESHOLD=5
CIRCUIT_BREAKER_TIMEOUT=30
CIRCUIT_BREAKER_RECOVERY_TIMEOUT=60

# ============================================================================
# Caching
# ============================================================================
CACHE_ENABLED=true
CACHE_TTL_THERMAL=300  # 5 minutes
CACHE_TTL_OPTIMIZATION=600  # 10 minutes
CACHE_TTL_SEARCH=3600  # 1 hour
CACHE_TTL_DEVICE_SPECS=3600  # 1 hour
CACHE_TTL_RACK_LAYOUT=600  # 10 minutes

# ============================================================================
# Web Spec Fetching
# ============================================================================
SPEC_FETCH_ENABLED=true
SPEC_FETCH_TIMEOUT=30
SPEC_FETCH_USER_AGENT="HomeRack/1.0 (https://github.com/yourusername/homerack)"
SPEC_FETCH_MAX_PDF_SIZE_MB=10

# ============================================================================
# File Upload Configuration
# ============================================================================
UPLOAD_DIR=uploads
BRAND_LOGOS_DIR=uploads/brand_logos
MAX_LOGO_SIZE_MB=5
